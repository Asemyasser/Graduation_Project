import{r as m,j as s,B as t}from"./index-BIrG4zXx.js";import{a as u}from"./axios-upsvKRUO.js";/* empty css                      */const P="_settingsPage_12len_1",h="_formCard_12len_27",p="_formTitle_12len_53",v="_input_12len_75",x="_button_12len_97",b="_saveButton_12len_131",j="_cancelButton_12len_151",r={settingsPage:P,formCard:h,formTitle:p,input:v,button:x,saveButton:b,cancelButton:j},y=()=>{const[o,l]=m.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[a,i]=m.useState({}),d=e=>{l({...o,[e.target.id]:e.target.value})},w=()=>{const e={};return o.oldPassword||(e.oldPassword="كلمة السر القديمة مطلوبة."),(!o.newPassword||!o.newPassword.match(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/))&&(e.newPassword="كلمة السر يجب أن تحتوي على 8 أحرف على الأقل، وتحتوي على حرف كبير وحرف صغير ورقم ورمز."),o.newPassword!==o.confirmPassword&&(e.confirmPassword="كلمة السر وتأكيدها غير متطابقين."),e},f=async e=>{e.preventDefault();const c=w();if(Object.keys(c).length>0){i(c);return}i({});try{const n=localStorage.getItem("authToken");if(!n){t.error("فشل المصادقة. لم يتم العثور على الرمز.");return}(await u.patch("/api/auth/dashboard/change-password",{oldPassword:o.oldPassword,newPassword:o.newPassword,confirmPassword:o.confirmPassword},{headers:{token:`${n}`}})).status===200?(t.success("تم تغيير كلمة السر بنجاح."),l({oldPassword:"",newPassword:"",confirmPassword:""})):t.error("حدث خطأ أثناء تغيير كلمة السر.")}catch(n){t.error(`${n.response.data.message}`),console.error(n)}};return s.jsx("div",{className:"container",children:s.jsx("div",{className:`${r.settingsPage}`,children:s.jsx("div",{className:"row justify-content-center",children:s.jsx("div",{className:"col-xl-4 col-lg-6 col-md-8 col-12",children:s.jsxs("div",{className:`${r.formCard}`,children:[s.jsx("h2",{className:`${r.formTitle} text-center`,children:"تغيير كلمة السر"}),s.jsxs("form",{onSubmit:f,children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"oldPassword",className:"form-label",children:"كلمة السر القديمة"}),s.jsx("input",{type:"password",id:"oldPassword",value:o.oldPassword,onChange:d,className:`form-control ${r.input} ${a.oldPassword?"is-invalid":""}`}),a.oldPassword&&s.jsx("div",{className:"invalid-feedback",children:a.oldPassword})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"newPassword",className:"form-label",children:"كلمة السر الجديدة"}),s.jsx("input",{type:"password",id:"newPassword",value:o.newPassword,onChange:d,className:`form-control ${r.input} ${a.newPassword?"is-invalid":""}`}),a.newPassword&&s.jsx("div",{className:"invalid-feedback",children:a.newPassword})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"form-label",children:"تأكيد كلمة السر"}),s.jsx("input",{type:"password",id:"confirmPassword",value:o.confirmPassword,onChange:d,className:`form-control ${r.input} ${a.confirmPassword?"is-invalid":""}`}),a.confirmPassword&&s.jsx("div",{className:"invalid-feedback",children:a.confirmPassword})]}),s.jsx("button",{type:"submit",className:`btn btn-primary rounded-pill ${r.button}`,children:"تغيير"})]})]})})})})})};export{y as default};
